# Введение: схема и определения

## Схема взаимодействия
![okerr diagram](/_static/okerr-diagram.png)

## Определения
***Индикатор*** - Основное понятие okerr. Индикатор может иметь два состояния - *OK* либо *ERR*. При смене состояния высылается *оповещение*. Так же индикатор содержит несколько сопутствующих свойств (например, время последней проверки, время последнего изменения статуса) и параметры *метода проверки*.

***Клиент*** - клиентская часть okerr, работающая на linux серверах пользователя, и передающая *обновления* индикаторов на сервер. Как правило, клиентом является утилиты okerrmod/okerrupdate из пакета [okerrupdate](https://github.com/yaroslaff/okerrupdate/) либо (гораздо реже) [okerrclient](https://gitlab.com/yaroslaff/okerrclient/). Так же клиентом может быть собственное приложение пользователя и даже утилита curl.

***Метод проверки*** - технический способ, которым меняет состояние индикатор. Для каждого метода проверки так же есть свой набор параметров. Например, метод проверки Ping имеет параметр host. Индикатор с этим методом проверки будет иметь состояние OK если пинг до хоста успешно пройдет, либо же ERR если пинга не будет.

***Обновление*** - (обновление индикатора, update). Внутреннее техническое сообщение о состоянии индикатора, которое клиент или сенсор отправляет на сервер okerr.

***Оповещение*** - Сообщение о смене статуса индикатора, которое отправляет okerr по электронной почте или Telegram. Оповещения могут не отправляться в некоторых случаях (например, когда у индикатора установлен флаг silent).

***Политика*** - Набор свойств индикатора, которые могут быть применены сразу к нескольким индикаторам. Например, все индикаторы, использующие политику Hourly перепроверяются один раз в час.

***Проект*** - совокупность индикаторов, политик и пользователей работающие вместе. Один пользователь может иметь доступ к нескольким проектам, а над проектом может работать один и более пользователей.

***Сенсор*** - внешняя часть сервера okerr, выполняющая сетевые проверки (ping, http status, antispam, ...)



